# SingleArgVoid Codegen

This folder contains the single-argument, void-return interceptor support for ChouTi. The per-type Swift files are generated by a bash script to keep ABI-typed implementations consistent.

## Files

- `InstanceMethodInterceptor+SingleArgVoid.swift`
  - Shared dispatcher and single-arg core logic.
  - The dispatch block between
    `// BEGIN GENERATED SINGLE ARG DISPATCH` and `// END GENERATED SINGLE ARG DISPATCH`
    is auto-generated by the script.

- `InstanceMethodInterceptor+Single<Int|CGSize|CGRect|Object>Void.swift`
  - Generated per-type ABI glue.

- `generate_single_arg_void.sh`
  - Codegen script.

## Extending with a new type

Edit the type lists at the top of `generate_single_arg_void.sh`:

- **Value types** (passed by value):
  
  ```bash
  VALUE_TYPES=(Int CGSize CGRect)
  ```

  Add your type name to the list, e.g. `CGFloat` or `CGPoint`.

- **Object / CFType types**:

  ```bash
  OBJECT_TYPES=(Object:AnyObject)
  ```

  Use `Name:SwiftType` if you want the file/function name to differ from the Swift type. Keep `Object:AnyObject` **last** as the catch-all for class types.

  Example to add `CGContext`:

  ```bash
  OBJECT_TYPES=(CGContext Object:AnyObject)
  ```

Then regenerate:

```bash
bash generate_single_arg_void.sh
```

This updates the per-type files and the dispatch block in `InstanceMethodInterceptor+SingleArgVoid.swift`.

After adding a new type, update `InstanceMethodInterceptor+SingleArgVoidTests.swift` to add tests for the new type.
